<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FCFS CPU Scheduling Simulator (Project DA 1)</title>
    <link rel="stylesheet" href="style.css">
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; background-color: #121212; color: #f5f5f5; }
        main { max-width: 1200px; margin: auto; }
        h1, h2, h3 { color: #00bcd4; }
        #scheduler-canvas { border: 2px solid #444; display: block; margin: 20px 0; background: #1e1e1e; }
        #control-stats-section { display: flex; justify-content: space-between; margin: 20px 0; align-items: flex-start; flex-wrap: wrap; }
        table, th, td { border: 1px solid #444; border-collapse: collapse; padding: 8px; text-align: center; }
        input[type="number"] { width: 60px; padding: 2px; border-radius: 4px; }
        button { background-color: #00bcd4; color: white; padding: 8px 12px; border: none; border-radius: 6px; cursor: pointer; margin-right: 5px; }
        button:hover { background-color: #0097a7; }
        #ready-queue-display {
            margin-top: 5px; padding: 8px; border: 1px dashed #888;
            min-height: 30px; border-radius: 6px; background-color: #1a1a1a;
        }
        hr { border: 1px solid #333; margin: 30px 0; }
    </style>
</head>
<body>
    <header>
        <h1>Operating System Digital Assessment 1: FCFS Simulator</h1>
    </header>

    <main>
        <!-- Input Section -->
        <section id="input-section">
            <h2>Process Input</h2>
            <div id="process-table-container">
                <table id="process-table">
                    <thead>
                        <tr>
                            <th>Process ID</th>
                            <th>Arrival Time (AT)</th>
                            <th>Burst Time (BT)</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>P1</td>
                            <td><input type="number" value="0" min="0" data-id="1" data-field="arrival"></td>
                            <td><input type="number" value="5" min="1" data-id="1" data-field="burst"></td>
                        </tr>
                        <tr>
                            <td>P2</td>
                            <td><input type="number" value="2" min="0" data-id="2" data-field="arrival"></td>
                            <td><input type="number" value="3" min="1" data-id="2" data-field="burst"></td>
                        </tr>
                        <tr>
                            <td>P3</td>
                            <td><input type="number" value="4" min="0" data-id="3" data-field="arrival"></td>
                            <td><input type="number" value="2" min="1" data-id="3" data-field="burst"></td>
                        </tr>
                    </tbody>
                </table>
                <br>
                <button onclick="addProcessRow()">‚ûï Add Process</button>
                <button onclick="runSimulation()">‚ñ∂Ô∏è Run FCFS Calculation</button>
            </div>
        </section>

        <hr>

        <!-- Controls & Statistics -->
        <section id="control-stats-section">
            <div id="controls">
                <button id="step-backward-btn" disabled>‚èÆÔ∏è Step Backward</button>
                <button id="pause-btn" disabled>‚è∏Ô∏è Pause</button>
                <button id="play-btn" disabled>‚ñ∂Ô∏è Play</button>
                <button id="step-forward-btn" disabled>‚è≠Ô∏è Step Forward</button>

                <br><br>
                <label for="speed">Speed:</label>
                <input type="range" id="speed" min="100" max="1000" value="500" step="50"> ms/step
            </div>
            
            <div id="statistics">
                <h3>Execution Statistics</h3>
                <p>Current Time: <span id="current-time">0</span></p>
                <p>Avg. Waiting Time: <span id="avg-waiting-time">N/A</span></p>
                <p>Avg. Turnaround Time: <span id="avg-turnaround-time">N/A</span></p>
            </div>
        </section>

        <hr>

        <!-- Visualization -->
        <section id="visualization-section">
            <h2>Gantt Chart & Process States</h2>
            <canvas id="scheduler-canvas" width="1000" height="300"></canvas> 
            <div id="process-states">
                <h3>Ready Queue:</h3>
                <div id="ready-queue-display"><em>Waiting processes will appear here...</em></div>
            </div>
        </section>
        
        <hr>

        <!-- Export -->
        <section id="export-section">
            <button onclick="exportScreenshot()">üì∑ Export Screenshot</button>
        </section>
    </main>
    
    <script src="style.css"></script>
    <script src="algorithm.js"></script>
    <script src="animation.js"></script>
    
    <script>
        let processCounter = 4;

        function addProcessRow() {
            const tableBody = document.getElementById('process-table').getElementsByTagName('tbody')[0];
            const newRow = tableBody.insertRow();
            const pid = `P${processCounter++}`;
            newRow.insertCell(0).textContent = pid;
            newRow.insertCell(1).innerHTML = `<input type="number" value="0" min="0" data-id="${pid}" data-field="arrival">`;
            newRow.insertCell(2).innerHTML = `<input type="number" value="1" min="1" data-id="${pid}" data-field="burst">`;
        }

        function runSimulation() {
            const rawData = getProcessesFromUI();
            if (rawData.length > 0) {
                const calculatedData = calculateFCFS(rawData);
                generateExecutionTrace(calculatedData);
            } else {
                alert("Please add at least one process.");
            }
        }
    </script>
</body>
</html>
